<html>
 <head></head>
 <body>
  <p>Одним из самых часто используемых классов в Python является класс <b>filter</b>. Он принимает в конструкторе два аргумента <b>a </b>и <b>f – </b>последовательность и функцию, и позволяет проитерироваться только по таким элементам <b>x </b>из последовательности <b>a</b>, что <b>f(x)</b> равно <b>True</b>. Будем говорить, что в этом случае функция <b>f</b> допускает элемент <b>x</b>, а элемент <b>x </b>является допущенным.</p>
  <p>В данной задаче мы просим вас реализовать класс <b>multifilter</b>, который будет выполнять ту же функцию, что и стандартный класс <b>filter</b>, но будет использовать не одну функцию, а несколько. </p>
  <p>Решение о допуске элемента будет приниматься на основании того, сколько функций допускают этот элемент, и сколько не допускают. Обозначим эти количества за <b>pos</b> и <b>neg</b>.</p>
  <p>Введем понятие <i>решающей функции<b> </b></i><b></b>– это функция, которая принимает два аргумента – количества <b>pos </b>и <b>neg</b>,<b> </b>и возвращает <b>True</b>, если элемент допущен, и <b>False</b> иначе.</p>
  <p>Рассмотрим процесс допуска подробнее на следующем примере.<br><b>a = [1, 2, 3]<br></b><b>f2(x) = x % 2 == 0 </b># возвращает <b>True</b>, если <b>x</b> делится на 2<br><b>f3(x) = x % 3 == 0<br></b><b>judge_any(pos, neg) = pos &gt;= 1 </b># возвращает <b>True</b>, если хотя бы одна функция допускает элемент<br></p>
  <p>В этом примере мы хотим отфильтровать последовательность <b>a</b> и оставить только те элементы, которые делятся на два или на три.</p>
  <p>Функция <b>f2 </b>допускает только элементы, делящиеся на два, а функция <b>f3</b> допускает только элементы, делящиеся на три. Решающая функция допускает элемент в случае, если он был допущен хотя бы одной из функций <b>f2</b> или <b>f3</b>, то есть элементы, которые делятся на два или на три.</p>
  <p>Возьмем первый элемент <b>x = 1</b>.<br><b>f2(x) </b>равно <b>False,</b> т. е. <b></b>функция <b>f2</b> не допускает элемент <b>x</b>.<br><b>f3(x)</b> также равно <b>False</b>, т. е. функция <b>f3</b> также не допускает элемент <b>x</b>.<br>В этом случае <b>pos = 0</b>, так как ни одна функция не допускает <b>x</b>, и<b> </b>соответственно <b>neg = 2.<br>judge_any(0, 2) </b>равно <b>False</b>, значит мы не допускаем элемент <b>x = 1</b>.</p>
  <p>Возьмем второй элемент <b>x = 2</b>.<br><b>f2(x) </b>равно <b>True<br></b><b>f3(x)</b> равно <b>False<br></b><b>pos = 1</b>, <b>neg = 1<br></b><b>judge_any(1, 1) </b>равно <b>True, </b>значит мы допускаем элемент <b>x = 2.</b><br></p>
  <p>Аналогично для третьего элемента <b>x = 3</b>.<br></p>
  <p>Таким образом, получили последовательность допущенных элементов <b>[2, 3]</b>.</p>
  <p>Класс должен обладать следующей структурой:<br></p>
  <pre></pre>
  <pre><code>class multifilter:
    def judge_half(pos, neg):
        # допускает элемент, если его допускает хотя бы половина фукнций (pos &gt;= neg)

    def judge_any(pos, neg):
        # допускает элемент, если его допускает хотя бы одна функция (pos &gt;= 1)

    def judge_all(pos, neg):
        # допускает элемент, если его допускают все функции (neg == 0)

    def __init__(self, iterable, *funcs, judge=judge_any):
        # iterable - исходная последовательность
        # funcs - допускающие функции
        # judge - решающая функция

    def __iter__(self):
        # возвращает итератор по результирующей последовательности</code></pre>
  <br>
  <p><b>Пример использования:<br></b>﻿</p>
  <pre><pre><code>def mul2(x):
    return x % 2 == 0

def mul3(x):
    return x % 3 == 0

def mul5(x):
    return x % 5 == 0


a = [i for i in range(31)] # [0, 1, 2, ... , 30]

print(list(multifilter(a, mul2, mul3, mul5))) 
# [0, 2, 3, 4, 5, 6, 8, 9, 10, 12, 14, 15, 16, 18, 20, 21, 22, 24, 25, 26, 27, 28, 30]

print(list(multifilter(a, mul2, mul3, mul5, judge=multifilter.judge_half))) 
# [0, 6, 10, 12, 15, 18, 20, 24, 30]

print(list(multifilter(a, mul2, mul3, mul5, judge=multifilter.judge_all))) 
# [0, 30]</code></pre></pre>
  <b><br></b>
 </body>
</html><br><br><font color="gray">Memory limit: 256 MB</font><br><font color="gray">Time limit: 5 seconds</font><br><br>